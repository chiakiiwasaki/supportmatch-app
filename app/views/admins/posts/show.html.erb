<div class="belt-admin"></div>
<div class='container'>
  <div class='row'>
    <div class='col-md-12 col-lg-12 text-right buttons'>
      <%= link_to '一覧へ戻る', admins_posts_path, class: "btn btn-outline-secondary" %>
    </div>
    <% if @post.is_valid? %>
      <div class='col-md-12 col-lg-12 text-right buttons'>
          <br>
          <span><strong>表示中</strong></span>&emsp;&emsp;
          <span><%= link_to '非表示', admins_post_path(@post), method: :patch, class: "btn btn-outline-danger" %></span>
      </div>
    <% else %>
      <div class='col-md-12 col-lg-12 text-right buttons'>
          <br>
          <span><strong>非表示中</strong></span>&emsp;&emsp;
          <span><%= link_to '表示', admins_post_path(@post), method: :patch, class: "btn btn-outline-danger" %></span>
      </div>
    <% end %>
  </div>
  <br>
  <h5><strong><%= @post.title %></strong></h5>
  <br>
  <div class='row'>
    <div class='col-md-2 col-lg-2 d-flex align-items-center justify-content-center'>
      <%= attachment_image_tag @post.user, :image, format: 'jpeg', fallback: "no_image.jpg", class: "user-img" %>
    </div>
    <div class='col-md-10 col-lg-10'>
      <span><strong><%= @post.user.name %></strong></span>
      <span class="date"><%= @post.created_at.strftime("%Y-%m-%d %H:%M")%></span>
      <p class="text"><%= @post.content %></p>
      <div><i class="fas fa-heart"></i><%= @post.favorites.count %></div>
    </div>
  </div>
  <% @post.post_comments.each do |post_comment| %>
    <hr>
    <br>
    <% if post_comment.is_valid? %>
      <div class='row'>
        <div class='col-md-12 col-lg-12 text-right'>
          <span><strong>表示中</strong></span>&emsp;&emsp;
          <span>
            <%= link_to '非表示', admins_post_post_comment_path(post_comment.post, post_comment), method: :patch, class: "btn btn-outline-danger" %>
          </span>
        </div>
      </div>
    <% else %>
      <div>
        <div class='col-md-12 col-lg-12 text-right'>
          <span><strong>非表示中</strong></span>&emsp;&emsp;
          <span>
            <%= link_to '表示', admins_post_post_comment_path(post_comment.post, post_comment), method: :patch, class: "btn btn-outline-danger" %>
          </span>
        </div>
      </div>
    <% end %>
    <div class='row'>
      <div class='col-md-2 col-lg-2 d-flex align-items-center justify-content-center'>
        <%= attachment_image_tag post_comment.user, :image, format: 'jpeg', fallback: "no_image.jpg", class: "user-img" %>
      </div>
      <div class='col-md-10 col-lg-10'>
        <span><strong><%= post_comment.user.name %></strong></span>
        <span class="date"><%= post_comment.created_at.strftime("%Y-%m-%d %H:%M")%></span>
        <p class="text"><%= post_comment.content %></p>
      </div>
    </div>
  <% end %>
</div>


<style>
 h5, .text{
    overflow-wrap : break-word;
 }

 .date{
  font-size: 10px;
 }

 .user-img{
  height: 50px;
  width: 50px;
  object-fit: cover;
 }
</style>